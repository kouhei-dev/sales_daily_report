# 本番環境の環境変数テンプレート
# 実際の値を設定して .env.production として保存してください
# 注意: .env.production はGitにコミットしないでください

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# データベース接続設定（MongoDB Atlas）
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# MongoDB Atlas接続文字列
# セキュリティ推奨設定:
# - retryWrites=true: 書き込みの自動リトライを有効化（高可用性）
# - w=majority: レプリカセットの過半数への書き込み確認（データ耐久性）
# - readPreference=primaryPreferred: プライマリからの読み取りを優先（一貫性）
# - maxPoolSize=10: 接続プールサイズ（Cloud Runの同時実行数に合わせる）
# - minPoolSize=2: 最小接続プール（レイテンシ削減）
# - serverSelectionTimeoutMS=5000: サーバー選択タイムアウト（5秒）
# - connectTimeoutMS=10000: 接続タイムアウト（10秒）
# - socketTimeoutMS=30000: ソケットタイムアウト（30秒）
# - ssl=true: SSL/TLS暗号化を強制
DATABASE_URL="mongodb+srv://username:password@cluster.mongodb.net/sales_daily_report?retryWrites=true&w=majority&readPreference=primaryPreferred&maxPoolSize=10&minPoolSize=2&serverSelectionTimeoutMS=5000&connectTimeoutMS=10000&socketTimeoutMS=30000&ssl=true"

# MongoDB Atlas設定チェックリスト:
# ✅ 1. データベースユーザーを作成（最小権限の原則）
# ✅ 2. ネットワークアクセス: Cloud RunのIPレンジまたは0.0.0.0/0を許可
#       注意: 0.0.0.0/0を使用する場合は強力なパスワードと認証を必須とする
# ✅ 3. クラスター構成: M10以上（本番環境推奨、バックアップ自動化）
# ✅ 4. リージョン: アプリケーションサーバーと同一リージョン（レイテンシ最小化）
# ✅ 5. 自動バックアップ: 有効化（RTO/RPO要件に応じて設定）
# ✅ 6. アラート設定: 接続数、CPU、メモリ、ディスク使用率の監視

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# セキュリティ設定
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# セッション秘密鍵（本番用の強力なランダム文字列）
# 生成方法: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 要件: 最低32バイト（64文字の16進数文字列）
SESSION_SECRET="production-secret-key-change-this"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# アプリケーション設定
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Next.js設定
# Cloud Runの実際のURLに置き換えてください
NEXT_PUBLIC_APP_URL="https://your-cloud-run-url.run.app"

# Node環境
NODE_ENV="production"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 本番環境コスト最適化のポイント
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# MongoDB Atlas コスト削減策:
# 1. 適切なクラスターサイズの選択
#    - 開発/ステージング: M0 (Free) または M2
#    - 本番環境（小規模）: M10 (月額$57〜)
#    - 本番環境（中規模）: M20 (月額$140〜)
#
# 2. データ保持ポリシーの設定
#    - 古いログデータの定期削除
#    - TTLインデックスの活用
#
# 3. 接続プールの最適化
#    - Cloud Runインスタンス数 × maxPoolSize の合計が
#      MongoDB Atlasの最大接続数を超えないように設定
#    - M10: 最大1500接続
#
# 4. バックアップストレージの最適化
#    - 必要最小限の保持期間設定
#    - スナップショット頻度の調整
#
# 5. モニタリングとアラート
#    - 予期しない使用量増加の早期検出
#    - クエリパフォーマンスの監視
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
