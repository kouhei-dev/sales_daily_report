# å–¶æ¥­æ—¥å ±ã‚·ã‚¹ãƒ†ãƒ 

[![CI](https://github.com/kouhei-dev/sales_daily_report/actions/workflows/ci.yml/badge.svg)](https://github.com/kouhei-dev/sales_daily_report/actions/workflows/ci.yml)

å–¶æ¥­æ‹…å½“è€…ãŒæ—¥ã€…ã®å–¶æ¥­æ´»å‹•ã‚’è¨˜éŒ²ã—ã€ä¸Šé•·ãŒç¢ºèªãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã§ãã‚‹æ—¥å ±ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

â€»ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯Claude Codeå­¦ç¿’ã®ãŸã‚ã®æ¶ç©ºã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

è©³ç´°ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ [claude/](./claude/) ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](./claude/README.md)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](./claude/tech-stack.md)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](./claude/architecture.md)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./claude/setup.md)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](./claude/guidelines.md)
- [ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †](./claude/deployment.md)

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Node.js 18.17.0ä»¥ä¸Š
- MongoDBï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã¾ãŸã¯MongoDB Atlasï¼‰
- Git

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/kouhei-dev/sales_daily_report.git
cd sales_daily_report

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cp .env.example .env.local
# .env.local ã‚’ç·¨é›†ã—ã¦å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

# Prismaã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npx prisma generate
npx prisma db push

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
npm run dev
```

http://localhost:3000 ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

## ğŸ› ï¸ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# Lintãƒã‚§ãƒƒã‚¯
npm run lint

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
npm run format

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ãƒ†ã‚¹ãƒˆï¼ˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼‰
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
npm run test:coverage

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run start
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [Vitest](https://vitest.dev/) ã¨ [React Testing Library](https://testing-library.com/react) ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

```bash
# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npm run test:coverage
```

ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ `__tests__/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ã€‚

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤

### Google Cloud Runã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

Makefileã‚’ä½¿ç”¨ã—ã¦Cloud Runã¸ç°¡å˜ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

```bash
# ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º
make help

# åˆæœŸè¨­å®šï¼ˆåˆå›ã®ã¿ï¼‰
make setup

# ãƒ•ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆãƒ“ãƒ«ãƒ‰â†’ãƒ—ãƒƒã‚·ãƒ¥â†’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
make deploy-full

# ãƒ­ã‚°ã‚’ç¢ºèª
make logs

# ã‚µãƒ¼ãƒ“ã‚¹URLã‚’è¡¨ç¤º
make url
```

#### ä¸»è¦ãªMakeã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰                  | èª¬æ˜                                     |
| ------------------------- | ---------------------------------------- |
| `make setup`              | åˆæœŸè¨­å®šï¼ˆGCPè¨­å®šã€APIæœ‰åŠ¹åŒ–ï¼‰           |
| `make build`              | Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰                   |
| `make push`               | ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’Artifact Registryã«ãƒ—ãƒƒã‚·ãƒ¥    |
| `make deploy`             | Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤                      |
| `make deploy-full`        | ãƒ•ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆãƒ“ãƒ«ãƒ‰â†’ãƒ—ãƒƒã‚·ãƒ¥â†’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰ |
| `make deploy-cloud-build` | Cloud Buildã§ãƒ‡ãƒ—ãƒ­ã‚¤                    |
| `make set-env`            | ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š                           |
| `make logs`               | ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º                   |
| `make url`                | ã‚µãƒ¼ãƒ“ã‚¹URLã‚’è¡¨ç¤º                        |
| `make rollback`           | å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯             |

è©³ç´°ã¯ [ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †](./claude/deployment.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“¦ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Next.js 16 (App Router), React 18, TypeScript
- **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: shadcn/ui + Tailwind CSS
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Next.js API Routes (Hono)
- **APIã‚¹ã‚­ãƒ¼ãƒ**: OpenAPI + Zod
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: MongoDB + Prisma
- **ãƒ†ã‚¹ãƒˆ**: Vitest + React Testing Library
- **Linter/Formatter**: ESLint + Prettier
- **CI/CD**: GitHub Actions
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Google Cloud Run

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'feat: add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [Conventional Commits](https://www.conventionalcommits.org/) å½¢å¼ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼ˆæ—¥æœ¬èªï¼‰ã€‚

```
<type>(<scope>): <ä»¶å>

<æœ¬æ–‡>

<ãƒ•ãƒƒã‚¿ãƒ¼>
```

**Type**:

- `feat`: æ–°æ©Ÿèƒ½
- `fix`: ãƒã‚°ä¿®æ­£
- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `style`: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- `refactor`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- `test`: ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£
- `chore`: ãƒ“ãƒ«ãƒ‰ã€è¨­å®šç­‰

è©³ç´°ã¯ [é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](./claude/guidelines.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## âš ï¸ æ—¢çŸ¥ã®èª²é¡Œãƒ»TODO

### CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

- **ESLintãƒã‚§ãƒƒã‚¯**: ç¾åœ¨CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨pre-commitãƒ•ãƒƒã‚¯ã‹ã‚‰ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™
  - **ç†ç”±**: ESLint 8ã¨eslint-config-next 16ã®ä¾å­˜é–¢ä¿‚ã®ç«¶åˆã€ãŠã‚ˆã³Next.js appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®šèª¿æ•´ãŒå¿…è¦
  - **å¯¾å¿œäºˆå®š**: Next.js appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åŸºæœ¬æ§‹ç¯‰å®Œäº†å¾Œã«å†è¿½åŠ 
  - **å†è¿½åŠ æ™‚ã®ä½œæ¥­**:
    1. `.github/workflows/ci.yml` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤
    2. `package.json` ã® `lint-staged` è¨­å®šã« `eslint --fix` ã‚’è¿½åŠ 
  - **å‚ç…§**: [.github/workflows/ci.yml#L31-L35](https://github.com/kouhei-dev/sales_daily_report/blob/main/.github/workflows/ci.yml#L31-L35)

### å®Ÿè£…äºˆå®šã®æ©Ÿèƒ½

- Prismaã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆ
- èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ï¼‰
- APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å®Ÿè£…ï¼ˆHono + Zodï¼‰
- shadcn/uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¿½åŠ 
- æ—¥å ±ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…
- ã‚³ãƒ¡ãƒ³ãƒˆãƒ»æ‰¿èªæ©Ÿèƒ½ã®å®Ÿè£…
- ãƒã‚¹ã‚¿ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç§çš„åˆ©ç”¨ã®ãŸã‚ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æœªå®šã§ã™ã€‚
